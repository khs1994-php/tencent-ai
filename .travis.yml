language: php
# cache:
#   directories:
#   - vendor
php:
  # - 5.6
  # - 7.0
  - 7.1
  - 7.2
script:
  - composer self-update
  - composer install -q
  - composer require illuminate/console
  # - composer update -q
  # - vendor/bin/phpunit --no-configuration --filter "/::testDeleteForce( .*)?$/" TencentAI\Tests\FaceTest $PWD/tests/TencentAI/FaceTest.php
  - vendor/bin/phpunit --coverage-clover=coverage.xml
  # set env CODECOV_TOKEN=XXX
  - bash <(curl -s https://codecov.io/bash)
  - php -r 'echo file_put_contents(sys_get_temp_dir()."/tencent_ai.log","test end",FILE_APPEND);'
  - php -r 'echo file_get_contents(sys_get_temp_dir()."/tencent_ai.log");'
branches:
  only:
    - master
    - dev
